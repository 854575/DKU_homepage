!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("mathematica",function(){function t(t,i){var r;return r=t.next(),'"'===r?(i.tokenize=e,i.tokenize(t,i)):"("===r&&t.eat("*")?(i.commentLevel++,i.tokenize=n,i.tokenize(t,i)):(t.backUp(1),t.match(l,!0,!1)?"number":t.match(c,!0,!1)?"number":t.match(/(?:In|Out)\[[0-9]*\]/,!0,!1)?"atom":t.match(/([a-zA-Z\$]+(?:`?[a-zA-Z0-9\$])*::usage)/,!0,!1)?"meta":t.match(/([a-zA-Z\$]+(?:`?[a-zA-Z0-9\$])*::[a-zA-Z\$][a-zA-Z0-9\$]*):?/,!0,!1)?"string-2":t.match(/([a-zA-Z\$][a-zA-Z0-9\$]*\s*:)(?:(?:[a-zA-Z\$][a-zA-Z0-9\$]*)|(?:[^:=>~@\^\&\*\)\[\]'\?,\|])).*/,!0,!1)?"variable-2":t.match(/[a-zA-Z\$][a-zA-Z0-9\$]*_+[a-zA-Z\$][a-zA-Z0-9\$]*/,!0,!1)?"variable-2":t.match(/[a-zA-Z\$][a-zA-Z0-9\$]*_+/,!0,!1)?"variable-2":t.match(/_+[a-zA-Z\$][a-zA-Z0-9\$]*/,!0,!1)?"variable-2":t.match(/\\\[[a-zA-Z\$][a-zA-Z0-9\$]*\]/,!0,!1)?"variable-3":t.match(/(?:\[|\]|{|}|\(|\))/,!0,!1)?"bracket":t.match(/(?:#[a-zA-Z\$][a-zA-Z0-9\$]*|#+[0-9]?)/,!0,!1)?"variable-2":t.match(u,!0,!1)?"keyword":t.match(/(?:\\|\+|\-|\*|\/|,|;|\.|:|@|~|=|>|<|&|\||_|`|'|\^|\?|!|%)/,!0,!1)?"operator":(t.next(),"error"))}function e(e,n){for(var i,r=!1,o=!1;null!=(i=e.next());){if('"'===i&&!o){r=!0;break}o=!o&&"\\"===i}return r&&!o&&(n.tokenize=t),"string"}function n(e,n){for(var i,r;n.commentLevel>0&&null!=(r=e.next());)"("===i&&"*"===r&&n.commentLevel++,"*"===i&&")"===r&&n.commentLevel--,i=r;return n.commentLevel<=0&&(n.tokenize=t),"comment"}var i="[a-zA-Z\\$][a-zA-Z0-9\\$]*",r="(?:\\d+)",o="(?:\\.\\d+|\\d+\\.\\d*|\\d+)",a="(?:\\.\\w+|\\w+\\.\\w*|\\w+)",s="(?:`(?:`?"+o+")?)",l=new RegExp("(?:"+r+"(?:\\^\\^"+a+s+"?(?:\\*\\^[+-]?\\d+)?))"),c=new RegExp("(?:"+o+s+"?(?:\\*\\^[+-]?\\d+)?)"),u=new RegExp("(?:`?)(?:"+i+")(?:`(?:"+i+"))*(?:`?)");return{startState:function(){return{tokenize:t,commentLevel:0}},token:function(t,e){return t.eatSpace()?null:e.tokenize(t,e)},blockCommentStart:"(*",blockCommentEnd:"*)"}}),t.defineMIME("text/x-mathematica",{name:"mathematica"})});