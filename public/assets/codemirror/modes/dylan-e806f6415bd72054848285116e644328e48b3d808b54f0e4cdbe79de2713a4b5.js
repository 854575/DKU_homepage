!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("dylan",function(){function t(t,e,n){return e.tokenize=n,n(t,e)}function e(e,r){var o=e.peek();if("'"==o||'"'==o)return e.next(),t(e,r,i(o,"string"));if("/"==o){if(e.next(),e.eat("*"))return t(e,r,n);if(e.eat("/"))return e.skipToEnd(),"comment";e.backUp(1)}else if(/[+\-\d\.]/.test(o)){if(e.match(/^[+-]?[0-9]*\.[0-9]*([esdx][+-]?[0-9]+)?/i)||e.match(/^[+-]?[0-9]+([esdx][+-]?[0-9]+)/i)||e.match(/^[+-]?\d+/))return"number"}else{if("#"==o)return e.next(),o=e.peek(),'"'==o?(e.next(),t(e,r,i('"',"string"))):"b"==o?(e.next(),e.eatWhile(/[01]/),"number"):"x"==o?(e.next(),e.eatWhile(/[\da-f]/i),"number"):"o"==o?(e.next(),e.eatWhile(/[0-7]/),"number"):"#"==o?(e.next(),"punctuation"):"["==o||"("==o?(e.next(),"bracket"):e.match(/f|t|all-keys|include|key|next|rest/i)?"atom":(e.eatWhile(/[-a-zA-Z]/),"error");if("~"==o)return e.next(),o=e.peek(),"="==o?(e.next(),o=e.peek(),"="==o?(e.next(),"operator"):"operator"):"operator";if(":"==o){if(e.next(),o=e.peek(),"="==o)return e.next(),"operator";if(":"==o)return e.next(),"punctuation"}else{if("[](){}".indexOf(o)!=-1)return e.next(),"bracket";if(".,".indexOf(o)!=-1)return e.next(),"punctuation";if(e.match("end"))return"keyword"}}for(var c in s)if(s.hasOwnProperty(c)){var u=s[c];if(u instanceof Array&&u.some(function(t){return e.match(t)})||e.match(u))return l[c]}return/[+\-*\/^=<>&|]/.test(o)?(e.next(),"operator"):e.match("define")?"def":(e.eatWhile(/[\w\-]/),d[e.current()]?f[e.current()]:e.current().match(a)?"variable":(e.next(),"variable-2"))}function n(t,n){for(var i,r=!1,o=!1,a=0;i=t.next();){if("/"==i&&r){if(!(a>0)){n.tokenize=e;break}a--}else"*"==i&&o&&a++;r="*"==i,o="/"==i}return"comment"}function i(t,n){return function(i,r){for(var o,a=!1,s=!1;null!=(o=i.next());){if(o==t&&!a){s=!0;break}a=!a&&"\\"==o}return!s&&a||(r.tokenize=e),n}}var r={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};r.otherDefinition=r.unnamedDefinition.concat(r.namedDefinition).concat(r.otherParameterizedDefinition),r.definition=r.typeParameterizedDefinition.concat(r.otherDefinition),r.parameterizedDefinition=r.typeParameterizedDefinition.concat(r.otherParameterizedDefinition),r.simpleDefinition=r.constantSimpleDefinition.concat(r.variableSimpleDefinition).concat(r.otherSimpleDefinition),r.keyword=r.statement.concat(r.separator).concat(r.other);var o="[-_a-zA-Z?!*@<>$%]+",a=new RegExp("^"+o),s={symbolKeyword:o+":",symbolClass:"<"+o+">",symbolGlobal:"\\*"+o+"\\*",symbolConstant:"\\$"+o},l={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var c in s)s.hasOwnProperty(c)&&(s[c]=new RegExp("^"+s[c]));s.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var u={};u.keyword="keyword",u.definition="def",u.simpleDefinition="def",u.signalingCalls="builtin";var d={},f={};return["keyword","definition","simpleDefinition","signalingCalls"].forEach(function(t){r[t].forEach(function(e){d[e]=t,f[e]=u[t]})}),{startState:function(){return{tokenize:e,currentIndent:0}},token:function(t,e){if(t.eatSpace())return null;var n=e.tokenize(t,e);return n},blockCommentStart:"/*",blockCommentEnd:"*/"}}),t.defineMIME("text/x-dylan","dylan")});