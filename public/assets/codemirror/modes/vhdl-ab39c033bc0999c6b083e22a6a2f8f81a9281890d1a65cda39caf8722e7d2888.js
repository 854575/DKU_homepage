!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(","),i=0;i<n.length;++i){var r=n[i].toUpperCase(),o=n[i].charAt(0).toUpperCase()+n[i].slice(1);t[n[i]]=!0,t[r]=!0,t[o]=!0}return t}function n(e){return e.eatWhile(/[\w\$_]/),"meta"}e.defineMode("vhdl",function(e,i){function r(e,t){var n=e.next();if(p[n]){var i=p[n](e,t);if(i!==!1)return i}if('"'==n)return t.tokenize=a(n),t.tokenize(e,t);if("'"==n)return t.tokenize=o(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return u=n,null;if(/[\d']/.test(n))return e.eatWhile(/[\w\.']/),"number";if("-"==n&&e.eat("-"))return e.skipToEnd(),"comment";if(v.test(n))return e.eatWhile(v),"operator";e.eatWhile(/[\w\$_]/);var r=e.current();return m.propertyIsEnumerable(r.toLowerCase())?(g.propertyIsEnumerable(r)&&(u="newstatement"),"keyword"):f.propertyIsEnumerable(r)?"atom":"variable"}function o(e){return function(t,n){for(var i,o=!1,a=!1;null!=(i=t.next());){if(i==e&&!o){a=!0;break}o=!o&&"--"==i}return(a||!o&&!h)&&(n.tokenize=r),"string"}}function a(e){return function(t,n){for(var i,o=!1,a=!1;null!=(i=t.next());){if(i==e&&!o){a=!0;break}o=!o&&"--"==i}return(a||!o&&!h)&&(n.tokenize=r),"string-2"}}function s(e,t,n,i,r){this.indented=e,this.column=t,this.type=n,this.align=i,this.prev=r}function l(e,t,n){return e.context=new s(e.indented,t,n,null,e.context)}function c(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}var u,d=e.indentUnit,f=i.atoms||t("null"),p=i.hooks||{"`":n,$:n},h=i.multiLineStrings,m=t("abs,access,after,alias,all,and,architecture,array,assert,attribute,begin,block,body,buffer,bus,case,component,configuration,constant,disconnect,downto,else,elsif,end,end block,end case,end component,end for,end generate,end if,end loop,end process,end record,end units,entity,exit,file,for,function,generate,generic,generic map,group,guarded,if,impure,in,inertial,inout,is,label,library,linkage,literal,loop,map,mod,nand,new,next,nor,null,of,on,open,or,others,out,package,package body,port,port map,postponed,procedure,process,pure,range,record,register,reject,rem,report,return,rol,ror,select,severity,signal,sla,sll,sra,srl,subtype,then,to,transport,type,unaffected,units,until,use,variable,wait,when,while,with,xnor,xor"),g=t("architecture,entity,begin,case,port,else,elsif,end,for,function,if"),v=/[&|~><!\)\(*#%@+\/=?\:;}{,\.\^\-\[\]]/;return{startState:function(e){return{tokenize:null,context:new s((e||0)-d,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;if(e.sol()&&(null==n.align&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;u=null;var i=(t.tokenize||r)(e,t);if("comment"==i||"meta"==i)return i;if(null==n.align&&(n.align=!0),";"!=u&&":"!=u||"statement"!=n.type)if("{"==u)l(t,e.column(),"}");else if("["==u)l(t,e.column(),"]");else if("("==u)l(t,e.column(),")");else if("}"==u){for(;"statement"==n.type;)n=c(t);for("}"==n.type&&(n=c(t));"statement"==n.type;)n=c(t)}else u==n.type?c(t):("}"==n.type||"top"==n.type||"statement"==n.type&&"newstatement"==u)&&l(t,e.column(),"statement");else c(t);return t.startOfLine=!1,i},indent:function(e,t){if(e.tokenize!=r&&null!=e.tokenize)return 0;var n=t&&t.charAt(0),i=e.context,o=n==i.type;return"statement"==i.type?i.indented+("{"==n?0:d):i.align?i.column+(o?0:1):i.indented+(o?0:d)},electricChars:"{}"}}),e.defineMIME("text/x-vhdl","vhdl")});