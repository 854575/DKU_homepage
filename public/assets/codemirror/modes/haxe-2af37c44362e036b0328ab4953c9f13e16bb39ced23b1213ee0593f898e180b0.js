!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("haxe",function(t,e){function n(t){return{type:t,style:"keyword"}}function i(t,e,n){return e.tokenize=n,n(t,e)}function r(t,e){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i)return!0;i=!i&&"\\"==n}}function o(t,e,n){return V=t,K=n,e}function a(t,e){var n=t.next();if('"'==n||"'"==n)return i(t,e,s(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return o(n);if("0"==n&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),o("number","number");if(/\d/.test(n)||"-"==n&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),o("number","number");if(e.reAllowed&&"~"==n&&t.eat(/\//))return r(t,"/"),t.eatWhile(/[gimsu]/),o("regexp","string-2");if("/"==n)return t.eat("*")?i(t,e,l):t.eat("/")?(t.skipToEnd(),o("comment","comment")):(t.eatWhile(nt),o("operator",null,t.current()));if("#"==n)return t.skipToEnd(),o("conditional","meta");if("@"==n)return t.eat(/:/),t.eatWhile(/[\w_]/),o("metadata","meta");if(nt.test(n))return t.eatWhile(nt),o("operator",null,t.current());var a;if(/[A-Z]/.test(n))return t.eatWhile(/[\w_<>]/),a=t.current(),o("type","variable-3",a);t.eatWhile(/[\w_]/);var a=t.current(),c=et.propertyIsEnumerable(a)&&et[a];return c&&e.kwAllowed?o(c.type,c.style,a):o("variable","variable",a)}function s(t){return function(e,n){return r(e,t)&&(n.tokenize=a),o("string","string")}}function l(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=a;break}i="*"==n}return o("comment","comment")}function c(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function u(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0}function d(t,e,n,i,r){var o=t.cc;for(rt.state=t,rt.stream=r,rt.marked=null,rt.cc=o,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var a=o.length?o.pop():k;if(a(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return rt.marked?rt.marked:"variable"==n&&u(t,i)?"variable-2":"variable"==n&&f(t,i)?"variable-3":e}}}function f(t,e){if(/[a-z]/.test(e.charAt(0)))return!1;for(var n=t.importedtypes.length,i=0;i<n;i++)if(t.importedtypes[i]==e)return!0}function h(t){for(var e=rt.state,n=e.importedtypes;n;n=n.next)if(n.name==t)return;e.importedtypes={name:t,next:e.importedtypes}}function p(){for(var t=arguments.length-1;t>=0;t--)rt.cc.push(arguments[t])}function m(){return p.apply(null,arguments),!0}function g(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function v(t){var e=rt.state;if(e.context){if(rt.marked="def",g(t,e.localVars))return;e.localVars={name:t,next:e.localVars}}else if(e.globalVars){if(g(t,e.globalVars))return;e.globalVars={name:t,next:e.globalVars}}}function y(){rt.state.context||(rt.state.localVars=ot),rt.state.context={prev:rt.state.context,vars:rt.state.localVars}}function b(){rt.state.localVars=rt.state.context.vars,rt.state.context=rt.state.context.prev}function _(t,e){var n=function(){var n=rt.state;n.lexical=new c(n.indented,rt.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function x(){var t=rt.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function w(t){function e(n){return n==t?m():";"==t?p():m(e)}return e}function k(t){return"@"==t?m(A):"var"==t?m(_("vardef"),P,w(";"),x):"keyword a"==t?m(_("form"),C,k,x):"keyword b"==t?m(_("form"),k,x):"{"==t?m(_("}"),y,F,x,b):";"==t?m():"attribute"==t?m(E):"function"==t?m(z):"for"==t?m(_("form"),w("("),_(")"),q,w(")"),x,k,x):"variable"==t?m(_("stat"),D):"switch"==t?m(_("form"),C,_("}","switch"),w("{"),F,x,x):"case"==t?m(C,w(":")):"default"==t?m(w(":")):"catch"==t?m(_("form"),y,w("("),U,w(")"),k,x,b):"import"==t?m(L,w(";")):"typedef"==t?m(N):p(_("stat"),C,w(";"),x)}function C(t){return it.hasOwnProperty(t)?m(T):"type"==t?m(T):"function"==t?m(z):"keyword c"==t?m(S):"("==t?m(_(")"),S,w(")"),x,T):"operator"==t?m(C):"["==t?m(_("]"),I(S,"]"),x,T):"{"==t?m(_("}"),I(j,"}"),x,T):m()}function S(t){return t.match(/[;\}\)\],]/)?p():p(C)}function T(t,e){if("operator"==t&&/\+\+|--/.test(e))return m(T);if("operator"==t||":"==t)return m(C);if(";"!=t)return"("==t?m(_(")"),I(C,")"),x,T):"."==t?m(O,T):"["==t?m(_("]"),C,w("]"),x,T):void 0}function E(t){return"attribute"==t?m(E):"function"==t?m(z):"var"==t?m(P):void 0}function A(t){return":"==t?m(A):"variable"==t?m(A):"("==t?m(_(")"),I(M,")"),x,k):void 0}function M(t){if("variable"==t)return m()}function L(t,e){return"variable"==t&&/[A-Z]/.test(e.charAt(0))?(h(e),m()):"variable"==t||"property"==t||"."==t||"*"==e?m(L):void 0}function N(t,e){return"variable"==t&&/[A-Z]/.test(e.charAt(0))?(h(e),m()):"type"==t&&/[A-Z]/.test(e.charAt(0))?m():void 0}function D(t){return":"==t?m(x,k):p(T,w(";"),x)}function O(t){if("variable"==t)return rt.marked="property",m()}function j(t){if("variable"==t&&(rt.marked="property"),it.hasOwnProperty(t))return m(w(":"),C)}function I(t,e){function n(i){return","==i?m(t,n):i==e?m():m(w(e))}return function(i){return i==e?m():p(t,n)}}function F(t){return"}"==t?m():p(k,F)}function P(t,e){return"variable"==t?(v(e),m($,R)):m()}function R(t,e){return"="==e?m(C,R):","==t?m(P):void 0}function q(t,e){return"variable"==t?(v(e),m(H,C)):p()}function H(t,e){if("in"==e)return m()}function z(t,e){return"variable"==t||"type"==t?(v(e),m(z)):"new"==e?m(z):"("==t?m(_(")"),y,I(U,")"),x,$,k,b):void 0}function $(t){if(":"==t)return m(W)}function W(t){return"type"==t?m():"variable"==t?m():"{"==t?m(_("}"),I(B,"}"),x):void 0}function B(t){if("variable"==t)return m($)}function U(t,e){if("variable"==t)return v(e),m($)}var V,K,G=t.indentUnit,X=n("keyword a"),Y=n("keyword b"),Q=n("keyword c"),Z=n("operator"),J={type:"atom",style:"atom"},tt={type:"attribute",style:"attribute"},V=n("typedef"),et={"if":X,"while":X,"else":Y,"do":Y,"try":Y,"return":Q,"break":Q,"continue":Q,"new":Q,"throw":Q,"var":n("var"),inline:tt,"static":tt,using:n("import"),"public":tt,"private":tt,cast:n("cast"),"import":n("import"),macro:n("macro"),"function":n("function"),"catch":n("catch"),untyped:n("untyped"),callback:n("cb"),"for":n("for"),"switch":n("switch"),"case":n("case"),"default":n("default"),"in":Z,never:n("property_access"),trace:n("trace"),"class":V,"abstract":V,"enum":V,"interface":V,typedef:V,"extends":V,"implements":V,dynamic:V,"true":J,"false":J,"null":J},nt=/[+\-*&%=<>!?|]/,it={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},rt={state:null,column:null,marked:null,cc:null},ot={name:"this",next:null};return b.lex=!0,x.lex=!0,{startState:function(t){var n=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],i={tokenize:a,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new c((t||0)-G,0,"block",!1),localVars:e.localVars,importedtypes:n,context:e.localVars&&{vars:e.localVars},indented:0};return e.globalVars&&"object"==typeof e.globalVars&&(i.globalVars=e.globalVars),i},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==V?n:(e.reAllowed=!("operator"!=V&&"keyword c"!=V&&!V.match(/^[\[{}\(,;:]$/)),e.kwAllowed="."!=V,d(e,n,V,K,t))},indent:function(t,e){if(t.tokenize!=a)return 0;var n=e&&e.charAt(0),i=t.lexical;"stat"==i.type&&"}"==n&&(i=i.prev);var r=i.type,o=n==r;return"vardef"==r?i.indented+4:"form"==r&&"{"==n?i.indented:"stat"==r||"form"==r?i.indented+G:"switch"!=i.info||o?i.align?i.column+(o?0:1):i.indented+(o?0:G):i.indented+(/^(?:case|default)\b/.test(e)?G:2*G)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),t.defineMIME("text/x-haxe","haxe"),t.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(t,e){var n=t.peek(),i=t.sol();if("#"==n)return t.skipToEnd(),"comment";if(i&&"-"==n){var r="variable-2";return t.eat(/-/),"-"==t.peek()&&(t.eat(/-/),r="keyword a"),"D"==t.peek()&&(t.eat(/[D]/),r="keyword c",e.define=!0),t.eatWhile(/[A-Z]/i),r}var n=t.peek();return 0==e.inString&&"'"==n&&(e.inString=!0,n=t.next()),1==e.inString?(t.skipTo("'")||t.skipToEnd(),"'"==t.peek()&&(t.next(),e.inString=!1),"string"):(t.next(),null)},lineComment:"#"}}),t.defineMIME("text/x-hxml","hxml")});