!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("julia",function(t,e){function n(t,e){return"undefined"==typeof e&&(e="\\b"),new RegExp("^(("+t.join(")|(")+"))"+e)}function i(t){var e=r(t);return"["==e}function r(t){return 0==t.scopes.length?null:t.scopes[t.scopes.length-1]}function o(t,e){if(t.match(/^#=/,!1))return e.tokenize=s,e.tokenize(t,e);var n=e.leavingExpr;if(t.sol()&&(n=!1),e.leavingExpr=!1,n&&t.match(/^'+/))return"operator";if(t.match(/^\.{2,3}/))return"operator";if(t.eatSpace())return null;var o=t.peek();if("#"===o)return t.skipToEnd(),"comment";"["===o&&e.scopes.push("["),"("===o&&e.scopes.push("(");var d=r(e);"["==d&&"]"===o&&(e.scopes.pop(),e.leavingExpr=!0),"("==d&&")"===o&&(e.scopes.pop(),e.leavingExpr=!0);var f;if(!i(e)&&(f=t.match(E,!1))&&e.scopes.push(f),!i(e)&&t.match(A,!1)&&e.scopes.pop(),i(e)){if("end"==e.lastToken&&t.match(/^:/))return"operator";if(t.match(/^end/))return"number"}if(t.match(/^=>/))return"operator";if(t.match(/^[0-9\.]/,!1)){var h=RegExp(/^im\b/),p=!1;if(t.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)&&(p=!0),t.match(/^\d+\.(?!\.)\d*/)&&(p=!0),t.match(/^\.\d+/)&&(p=!0),t.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(p=!0),t.match(/^0x[0-9a-f]+/i)&&(p=!0),t.match(/^0b[01]+/i)&&(p=!0),t.match(/^0o[0-7]+/i)&&(p=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(p=!0),t.match(/^0(?![\dx])/i)&&(p=!0),p)return t.match(h),e.leavingExpr=!0,"number"}if(t.match(/^<:/))return"operator";if(t.match(N))return"builtin";if(!n&&t.match(L)||t.match(/:\./))return"builtin";if(t.match(/^{[^}]*}(?=\()/))return"builtin";if(t.match(m))return"operator";if(t.match(/^'/))return e.tokenize=l,e.tokenize(t,e);if(t.match(k))return e.tokenize=c(t.current()),e.tokenize(t,e);if(t.match(M))return"meta";if(t.match(g))return null;if(t.match(S))return"keyword";if(t.match(T))return"builtin";var y=e.isDefinition||"function"==e.lastToken||"macro"==e.lastToken||"type"==e.lastToken||"immutable"==e.lastToken;return t.match(v)?y?"."===t.peek()?(e.isDefinition=!0,"variable"):(e.isDefinition=!1,"def"):t.match(/^({[^}]*})*\(/,!1)?a(t,e):(e.leavingExpr=!0,"variable"):(t.next(),u)}function a(t,e){var n=t.match(/^(\(\s*)/);if(n&&(e.firstParenPos<0&&(e.firstParenPos=e.scopes.length),e.scopes.push("("),e.charsAdvanced+=n[1].length),"("==r(e)&&t.match(/^\)/)&&(e.scopes.pop(),e.charsAdvanced+=1,e.scopes.length<=e.firstParenPos)){var i=t.match(/^\s*?=(?!=)/,!1);return t.backUp(e.charsAdvanced),e.firstParenPos=-1,e.charsAdvanced=0,i?"def":"builtin"}if(t.match(/^$/g,!1)){for(t.backUp(e.charsAdvanced);e.scopes.length>e.firstParenPos;)e.scopes.pop();return e.firstParenPos=-1,e.charsAdvanced=0,"builtin"}return e.charsAdvanced+=t.match(/^([^()]*)/)[1].length,a(t,e)}function s(t,e){return t.match(/^#=/)&&e.weakScopes++,t.match(/.*?(?=(#=|=#))/)||t.skipToEnd(),t.match(/^=#/)&&(e.weakScopes--,0==e.weakScopes&&(e.tokenize=o)),"comment"}function l(t,e){var n,i=!1;if(t.match(C))i=!0;else if(n=t.match(/\\u([a-f0-9]{1,4})(?=')/i)){var r=parseInt(n[1],16);(r<=55295||r>=57344)&&(i=!0,t.next())}else if(n=t.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var r=parseInt(n[1],16);r<=1114111&&(i=!0,t.next())}return i?(e.leavingExpr=!0,e.tokenize=o,"string"):(t.match(/^[^']+(?=')/)||t.skipToEnd(),t.match(/^'/)&&(e.tokenize=o),u)}function c(t){function e(e,i){for(;!e.eol();)if(e.eatWhile(/[^"\\]/),e.eat("\\"))e.next();else{if(e.match(t))return i.tokenize=o,i.leavingExpr=!0,n;e.eat(/["]/)}return n}for(;"bruv".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var n="string";return e.isString=!0,e}var u="error",d="\\\\[0-7]{1,3}",f="\\\\x[A-Fa-f0-9]{1,2}",h="\\\\[abfnrtv0%?'\"\\\\]",p="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",m=e.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/,g=e.delimiters||/^[;,()[\]{}]/,v=e.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,y=[d,f,h,p],b=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],_=["end","else","elseif","catch","finally"],x=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"],w=["true","false","nothing","NaN","Inf"],k=/^(`|"{3}|([brv]?"))/,C=n(y,"'"),S=n(x),T=n(w),E=n(b),A=n(_),M=/^@[_A-Za-z][\w]*/,L=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,N=/^::[^,;"{()=$\s]+({[^}]*}+)*/,D={startState:function(){return{tokenize:o,scopes:[],weakScopes:0,lastToken:null,leavingExpr:!1,isDefinition:!1,charsAdvanced:0,firstParenPos:-1}},token:function(t,e){var n=e.tokenize(t,e),i=t.current();return i&&n&&(e.lastToken=i),"."===i&&(n=t.match(v,!1)||t.match(M,!1)||t.match(/\(/,!1)?"operator":u),n},indent:function(e,n){var i=0;return"]"!=n&&")"!=n&&"end"!=n&&"else"!=n&&"elseif"!=n&&"catch"!=n&&"finally"!=n||(i=-1),(e.scopes.length+i)*t.indentUnit},electricInput:/(end|else(if)?|catch|finally)$/,lineComment:"#",fold:"indent"};return D}),t.defineMIME("text/x-julia","julia")});