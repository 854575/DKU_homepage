!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("fcl",function(t){function e(t,e){var i=t.next();if(/[\d\.]/.test(i))return"."==i?t.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==i?t.match(/^[xX][0-9a-fA-F]+/)||t.match(/^0[0-7]+/):t.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if("/"==i||"("==i){if(t.eat("*"))return e.tokenize=n,n(t,e);if(t.eat("/"))return t.skipToEnd(),"comment"}if(d.test(i))return t.eatWhile(d),"operator";t.eatWhile(/[\w\$_\xa1-\uffff]/);var r=t.current().toLowerCase();return s.propertyIsEnumerable(r)||l.propertyIsEnumerable(r)||c.propertyIsEnumerable(r)?"keyword":u.propertyIsEnumerable(r)?"atom":"variable"}function n(t,n){for(var i,r=!1;i=t.next();){if(("/"==i||")"==i)&&r){n.tokenize=e;break}r="*"==i}return"comment"}function i(t,e,n,i,r){this.indented=t,this.column=e,this.type=n,this.align=i,this.prev=r}function r(t,e,n){return t.context=new i(t.indented,e,n,null,t.context)}function o(t){if(t.context.prev){var e=t.context.type;return"end_block"==e&&(t.indented=t.context.indented),t.context=t.context.prev}}var a=t.indentUnit,s={term:!0,method:!0,accu:!0,rule:!0,then:!0,is:!0,and:!0,or:!0,"if":!0,"default":!0},l={var_input:!0,var_output:!0,fuzzify:!0,defuzzify:!0,function_block:!0,ruleblock:!0},c={end_ruleblock:!0,end_defuzzify:!0,end_function_block:!0,end_fuzzify:!0,end_var:!0},u={"true":!0,"false":!0,nan:!0,real:!0,min:!0,max:!0,cog:!0,cogs:!0},d=/[+\-*&^%:=<>!|\/]/;return{startState:function(t){return{tokenize:null,context:new i((t||0)-a,0,"top",!1),indented:0,startOfLine:!0}},token:function(t,n){var i=n.context;if(t.sol()&&(null==i.align&&(i.align=!1),n.indented=t.indentation(),n.startOfLine=!0),t.eatSpace())return null;var a=(n.tokenize||e)(t,n);if("comment"==a)return a;null==i.align&&(i.align=!0);var s=t.current().toLowerCase();return l.propertyIsEnumerable(s)?r(n,t.column(),"end_block"):c.propertyIsEnumerable(s)&&o(n),n.startOfLine=!1,a},indent:function(t,n){if(t.tokenize!=e&&null!=t.tokenize)return 0;var i=t.context,r=c.propertyIsEnumerable(n);return i.align?i.column+(r?0:1):i.indented+(r?0:a)},electricChars:"ryk",fold:"brace",blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:"//"}}),t.defineMIME("text/x-fcl","fcl")});