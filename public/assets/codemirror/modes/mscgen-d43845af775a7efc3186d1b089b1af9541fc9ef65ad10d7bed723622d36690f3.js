!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("\\b("+e.join("|")+")\\b","i")}function n(e){return new RegExp("("+e.join("|")+")","i")}function i(){return{inComment:!1,inString:!1,inAttributeList:!1,inScript:!1}}function r(e){return{inComment:e.inComment,inString:e.inString,inAttributeList:e.inAttributeList,inScript:e.inScript}}function o(e){return function(i,r){if(i.match(n(e.brackets),!0,!0))return"bracket";if(!r.inComment){if(i.match(/\/\*[^\*\/]*/,!0,!0))return r.inComment=!0,"comment";if(i.match(n(e.singlecomment),!0,!0))return i.skipToEnd(),"comment"}if(r.inComment)return i.match(/[^\*\/]*\*\//,!0,!0)?r.inComment=!1:i.skipToEnd(),"comment";if(!r.inString&&i.match(/\"(\\\"|[^\"])*/,!0,!0))return r.inString=!0,"string";if(r.inString)return i.match(/[^\"]*\"/,!0,!0)?r.inString=!1:i.skipToEnd(),"string";if(e.keywords&&i.match(t(e.keywords),!0,!0))return"keyword";if(i.match(t(e.options),!0,!0))return"keyword";if(i.match(t(e.arcsWords),!0,!0))return"keyword";if(i.match(n(e.arcsOthers),!0,!0))return"keyword";if(e.operators&&i.match(n(e.operators),!0,!0))return"operator";if(!e.inAttributeList&&e.attributes&&i.match(/\[/,!0,!0))return e.inAttributeList=!0,"bracket";if(e.inAttributeList){if(null!==e.attributes&&i.match(t(e.attributes),!0,!0))return"attribute";if(i.match(/]/,!0,!0))return e.inAttributeList=!1,"bracket"}return i.next(),"base"}}var a={mscgen:{keywords:["msc"],options:["hscale","width","arcgradient","wordwraparcs"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},xu:{keywords:["msc"],options:["hscale","width","arcgradient","wordwraparcs","watermark"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},msgenny:{keywords:null,options:["hscale","width","arcgradient","wordwraparcs","watermark"],attributes:null,brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]}};e.defineMode("mscgen",function(e,t){var n=a[t&&t.language||"mscgen"];return{startState:i,copyState:r,token:o(n),lineComment:"#",blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-mscgen","mscgen"),e.defineMIME("text/x-xu",{name:"mscgen",language:"xu"}),e.defineMIME("text/x-msgenny",{name:"mscgen",language:"msgenny"})});