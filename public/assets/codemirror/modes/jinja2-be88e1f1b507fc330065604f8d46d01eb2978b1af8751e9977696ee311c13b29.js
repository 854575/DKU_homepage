!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("jinja2",function(){function t(t,a){var s=t.peek();if(a.incomment)return t.skipTo("#}")?(t.eatWhile(/\#|}/),a.incomment=!1):t.skipToEnd(),"comment";if(a.intag){if(a.operator){if(a.operator=!1,t.match(r))return"atom";if(t.match(o))return"number"}if(a.sign){if(a.sign=!1,t.match(r))return"atom";if(t.match(o))return"number"}if(a.instring)return s==a.instring&&(a.instring=!1),t.next(),"string";if("'"==s||'"'==s)return a.instring=s,t.next(),"string";if(t.match(a.intag+"}")||t.eat("-")&&t.match(a.intag+"}"))return a.intag=!1,"tag";if(t.match(n))return a.operator=!0,"operator";if(t.match(i))a.sign=!0;else if(t.eat(" ")||t.sol()){if(t.match(e))return"keyword";if(t.match(r))return"atom";if(t.match(o))return"number";t.sol()&&t.next()}else t.next();return"variable"}if(t.eat("{")){if(s=t.eat("#"))return a.incomment=!0,t.skipTo("#}")?(t.eatWhile(/\#|}/),a.incomment=!1):t.skipToEnd(),"comment";if(s=t.eat(/\{|%/))return a.intag=s,"{"==s&&(a.intag="}"),t.eat("-"),"tag"}t.next()}var e=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","plural"],n=/^[+\-*&%=<>!?|~^]/,i=/^[:\[\(\{]/,r=["true","false"],o=/^(\d[+\-\*\/])?\d+(\.\d+)?/;return e=new RegExp("(("+e.join(")|(")+"))\\b"),r=new RegExp("(("+r.join(")|(")+"))\\b"),{startState:function(){return{tokenize:t}},token:function(t,e){return e.tokenize(t,e)}}})});