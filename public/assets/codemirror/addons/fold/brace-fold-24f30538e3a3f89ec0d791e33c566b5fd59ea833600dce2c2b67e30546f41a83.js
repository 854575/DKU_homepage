!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.registerHelper("fold","brace",function(e,n){function i(i){for(var o=n.ch,l=0;;){var c=o<=0?-1:a.lastIndexOf(i,o-1);if(c!=-1){if(1==l&&c<n.ch)break;if(s=e.getTokenTypeAt(t.Pos(r,c+1)),!/^(comment|string)/.test(s))return c+1;o=c-1}else{if(1==l)break;l=1,o=a.length}}}var s,r=n.line,a=e.getLine(r),o="{",l="}",c=i("{");if(null==c&&(o="[",l="]",c=i("[")),null!=c){var d,u,h=1,f=e.lastLine();t:for(var p=r;p<=f;++p)for(var g=e.getLine(p),m=p==r?c:0;;){var v=g.indexOf(o,m),_=g.indexOf(l,m);if(v<0&&(v=g.length),_<0&&(_=g.length),m=Math.min(v,_),m==g.length)break;if(e.getTokenTypeAt(t.Pos(p,m+1))==s)if(m==v)++h;else if(!--h){d=p,u=m;break t}++m}if(null!=d&&(r!=d||u!=c))return{from:t.Pos(r,c),to:t.Pos(d,u)}}}),t.registerHelper("fold","import",function(e,n){function i(n){if(n<e.firstLine()||n>e.lastLine())return null;var i=e.getTokenAt(t.Pos(n,1));if(/\S/.test(i.string)||(i=e.getTokenAt(t.Pos(n,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var s=n,r=Math.min(e.lastLine(),n+10);s<=r;++s){var a=e.getLine(s),o=a.indexOf(";");if(o!=-1)return{startCh:i.end,end:t.Pos(s,o)}}}var s,r=n.line,a=i(r);if(!a||i(r-1)||(s=i(r-2))&&s.end.line==r-1)return null;for(var o=a.end;;){var l=i(o.line+1);if(null==l)break;o=l.end}return{from:e.clipPos(t.Pos(r,a.startCh+1)),to:o}}),t.registerHelper("fold","include",function(e,n){function i(n){if(n<e.firstLine()||n>e.lastLine())return null;var i=e.getTokenAt(t.Pos(n,1));return/\S/.test(i.string)||(i=e.getTokenAt(t.Pos(n,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8)?i.start+8:void 0}var s=n.line,r=i(s);if(null==r||null!=i(s-1))return null;for(var a=s;;){var o=i(a+1);if(null==o)break;++a}return{from:t.Pos(s,r+1),to:e.clipPos(t.Pos(a))}})});