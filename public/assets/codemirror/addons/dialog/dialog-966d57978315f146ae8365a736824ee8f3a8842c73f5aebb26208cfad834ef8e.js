!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){function e(t,e,n){var i,s=t.getWrapperElement();return i=s.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof e?i.innerHTML=e:i.appendChild(e),i}function n(t,e){t.state.currentNotificationClose&&t.state.currentNotificationClose(),t.state.currentNotificationClose=e}t.defineExtension("openDialog",function(i,s,r){function a(t){if("string"==typeof t)u.value=t;else{if(c)return;c=!0,l.parentNode.removeChild(l),d.focus(),r.onClose&&r.onClose(l)}}r||(r={}),n(this,null);var o,l=e(this,i,r.bottom),c=!1,d=this,u=l.getElementsByTagName("input")[0];return u?(u.focus(),r.value&&(u.value=r.value,r.selectValueOnOpen!==!1&&u.select()),r.onInput&&t.on(u,"input",function(t){r.onInput(t,u.value,a)}),r.onKeyUp&&t.on(u,"keyup",function(t){r.onKeyUp(t,u.value,a)}),t.on(u,"keydown",function(e){r&&r.onKeyDown&&r.onKeyDown(e,u.value,a)||((27==e.keyCode||r.closeOnEnter!==!1&&13==e.keyCode)&&(u.blur(),t.e_stop(e),a()),13==e.keyCode&&s(u.value,e))}),r.closeOnBlur!==!1&&t.on(u,"blur",a)):(o=l.getElementsByTagName("button")[0])&&(t.on(o,"click",function(){a(),d.focus()}),r.closeOnBlur!==!1&&t.on(o,"blur",a),o.focus()),a}),t.defineExtension("openConfirm",function(i,s,r){function a(){c||(c=!0,o.parentNode.removeChild(o),d.focus())}n(this,null);var o=e(this,i,r&&r.bottom),l=o.getElementsByTagName("button"),c=!1,d=this,u=1;l[0].focus();for(var h=0;h<l.length;++h){var f=l[h];!function(e){t.on(f,"click",function(n){t.e_preventDefault(n),a(),e&&e(d)})}(s[h]),t.on(f,"blur",function(){--u,setTimeout(function(){u<=0&&a()},200)}),t.on(f,"focus",function(){++u})}}),t.defineExtension("openNotification",function(i,s){function r(){l||(l=!0,clearTimeout(a),o.parentNode.removeChild(o))}n(this,r);var a,o=e(this,i,s&&s.bottom),l=!1,c=s&&"undefined"!=typeof s.duration?s.duration:5e3;return t.on(o,"click",function(e){t.e_preventDefault(e),r()}),c&&(a=setTimeout(r,c)),r})});