!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";var e=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;t.commands.newlineAndIndentContinueMarkdownList=function(s){if(s.getOption("disableInput"))return t.Pass;for(var r=s.listSelections(),a=[],o=0;o<r.length;o++){var l=r[o].head,c=s.getStateAfter(l.line),d=c.list!==!1,u=0!==c.quote,h=s.getLine(l.line),f=e.exec(h);if(!r[o].empty()||!d&&!u||!f)return void s.execCommand("newlineAndIndent");if(n.test(h))s.replaceRange("",{line:l.line,ch:0},{line:l.line,ch:l.ch+1}),a[o]="\n";else{var p=f[1],g=f[5],m=i.test(f[2])||f[2].indexOf(">")>=0?f[2]:parseInt(f[3],10)+1+f[4];a[o]="\n"+p+m+g}}s.replaceSelections(a)}});