!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t,e){var n=t.state.selectionPointer;(null==e.buttons?e.which:e.buttons)?n.mouseX=n.mouseY=null:(n.mouseX=e.clientX,n.mouseY=e.clientY),r(t)}function n(t,e){if(!t.getWrapperElement().contains(e.relatedTarget)){var n=t.state.selectionPointer;n.mouseX=n.mouseY=null,r(t)}}function i(t){t.state.selectionPointer.rects=null,r(t)}function r(t){t.state.selectionPointer.willUpdate||(t.state.selectionPointer.willUpdate=!0,setTimeout(function(){s(t),t.state.selectionPointer.willUpdate=!1},50))}function s(t){var e=t.state.selectionPointer;if(e){if(null==e.rects&&null!=e.mouseX&&(e.rects=[],t.somethingSelected()))for(var n=t.display.selectionDiv.firstChild;n;n=n.nextSibling)e.rects.push(n.getBoundingClientRect());var i=!1;if(null!=e.mouseX)for(var r=0;r<e.rects.length;r++){var s=e.rects[r];s.left<=e.mouseX&&s.right>=e.mouseX&&s.top<=e.mouseY&&s.bottom>=e.mouseY&&(i=!0)}var o=i?e.value:"";t.display.lineDiv.style.cursor!=o&&(t.display.lineDiv.style.cursor=o)}}t.defineOption("selectionPointer",!1,function(r,s){var o=r.state.selectionPointer;o&&(t.off(r.getWrapperElement(),"mousemove",o.mousemove),t.off(r.getWrapperElement(),"mouseout",o.mouseout),t.off(window,"scroll",o.windowScroll),r.off("cursorActivity",i),r.off("scroll",i),r.state.selectionPointer=null,r.display.lineDiv.style.cursor=""),s&&(o=r.state.selectionPointer={value:"string"==typeof s?s:"default",mousemove:function(t){e(r,t)},mouseout:function(t){n(r,t)},windowScroll:function(){i(r)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},t.on(r.getWrapperElement(),"mousemove",o.mousemove),t.on(r.getWrapperElement(),"mouseout",o.mouseout),t.on(window,"scroll",o.windowScroll),r.on("cursorActivity",i),r.on("scroll",i))})});