!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.multiplexingMode=function(e){function n(t,e,n,i){if("string"==typeof e){var r=t.indexOf(e,n);return i&&r>-1?r+e.length:r}var s=e.exec(n?t.slice(n):t);return s?s.index+n+(i?s[0].length:0):-1}var i=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:t.startState(e),innerActive:null,inner:null}},copyState:function(n){return{outer:t.copyState(e,n.outer),innerActive:n.innerActive,inner:n.innerActive&&t.copyState(n.innerActive.mode,n.inner)}},token:function(r,s){if(s.innerActive){var o=s.innerActive,a=r.string;if(!o.close&&r.sol())return s.innerActive=s.inner=null,this.token(r,s);var l=o.close?n(a,o.close,r.pos,o.parseDelimiters):-1;if(l==r.pos&&!o.parseDelimiters)return r.match(o.close),s.innerActive=s.inner=null,o.delimStyle&&o.delimStyle+" "+o.delimStyle+"-close";l>-1&&(r.string=a.slice(0,l));var c=o.mode.token(r,s.inner);return l>-1&&(r.string=a),l==r.pos&&o.parseDelimiters&&(s.innerActive=s.inner=null),o.innerStyle&&(c=c?c+" "+o.innerStyle:o.innerStyle),c}for(var u=1/0,a=r.string,d=0;d<i.length;++d){var h=i[d],l=n(a,h.open,r.pos);if(l==r.pos)return h.parseDelimiters||r.match(h.open),s.innerActive=h,s.inner=t.startState(h.mode,e.indent?e.indent(s.outer,""):0),h.delimStyle&&h.delimStyle+" "+h.delimStyle+"-open";l!=-1&&l<u&&(u=l)}u!=1/0&&(r.string=a.slice(0,u));var f=e.token(r,s.outer);return u!=1/0&&(r.string=a),f},indent:function(n,i){var r=n.innerActive?n.innerActive.mode:e;return r.indent?r.indent(n.innerActive?n.inner:n.outer,i):t.Pass},blankLine:function(n){var r=n.innerActive?n.innerActive.mode:e;if(r.blankLine&&r.blankLine(n.innerActive?n.inner:n.outer),n.innerActive)"\n"===n.innerActive.close&&(n.innerActive=n.inner=null);else for(var s=0;s<i.length;++s){var o=i[s];"\n"===o.open&&(n.innerActive=o,n.inner=t.startState(o.mode,r.indent?r.indent(n.outer,""):0))}},electricChars:e.electricChars,innerMode:function(t){return t.inner?{state:t.inner,mode:t.innerActive.mode}:{state:t.outer,mode:e}}}}});